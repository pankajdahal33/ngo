<!DOCTYPE html>

{% extends "base.html" %} {% load static %} {% block content %}

<!-- Add Bootstrap and DataTables CSS -->
<link
  rel="stylesheet"
  href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
/>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
/>


<div class="container mt-4">
  <div class="container mt-4">
    <div class="row">
      <div class="col-md-12">
        <h1 class="text-center mb-4">Add Menu</h1>
        <form
          method="POST"
          action="{% url 'add_menu' %}"
          enctype="multipart/form-data"
        >
          {% csrf_token %}
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label for="name">Item Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="name"
                  name="name"
                  placeholder="Enter Item Name"
                  required
                />
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label for="price">Price</label>
                <input
                  type="text"
                  class="form-control"
                  id="price"
                  name="price"
                  placeholder="Enter Price"
                  required
                />
                <small id="priceHelp" class="form-text text-muted"
                  >Enter the price of the item.</small
                >
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label for="category">Category</label>
                <select
                  class="form-control"
                  id="category"
                  name="category"
                  required
                >
                  <option value="">Select Category</option>
                  {% for category in categories %}
                  <option value="{{ category.id }}">{{ category.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-group mt-3">
                <label for="image">Image</label>
                <input
                  type="file"
                  class="form-control"
                  id="image"
                  name="image"
                  required
                />
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-block">
            Submit
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="container mt-5">
  <div class="row">
    <div class="col-md-12">
      <table id="tables" class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>Item Name</th>
            <th>Price</th>
            <th>Category</th>
            <th>Image</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for menu in menus %}
          <tr>
            <td>{{ menu.name }}</td>
            <td>Rs. {{ menu.price }}</td>
            <td>{{ menu.category }}</td>
            <td>
              {% if menu.image %}
              <div class="menu-item">
                <img src="{{ menu.image.url }}" alt="{{ menu.name }}" class="menu-image" />
            </div>             
             {% else %}
              <p>No image available</p>
              {% endif %}
            </td>

            <td>
              <a
                href="{% url 'edit_menu' menu.id %}"
                class="btn btn-warning btn-sm"
              >
                <i class="bi bi-pencil-square"></i> Edit
              </a>
              <a
                href="{% url 'delete_menu' menu.id %}"
                class="btn btn-danger btn-sm"
              >
                <i class="bi bi-trash"></i> Delete
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Add jQuery and DataTables JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script>
  $(document).ready(function () {
    // Initialize DataTables
    $("#tables").DataTable({
      searching: true, // Enable search functionality
      ordering: true, // Enable sorting functionality
      paging: true, // Enable pagination
      info: true, // Show info like "Showing x of y entries"
    });
  });
</script>

{% endblock %}
